(this["webpackJsonpcoffee-guys"]=this["webpackJsonpcoffee-guys"]||[]).push([[0],{50:function(e,t,c){},70:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c(0),r=c.n(s),i=c(19),n=c.n(i),o=c(10),l=c(11),d=c(12),j=c(3),u={category:null,sortBy:"popularity"},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_BY":return Object(j.a)(Object(j.a)({},e),{},{sortBy:t.payload});case"SET_CATEGORY":return Object(j.a)(Object(j.a)({},e),{},{category:t.payload});default:return e}},b={items:[],isLoaded:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COFFEE":return Object(j.a)(Object(j.a)({},e),{},{items:t.payload,isLoaded:!0});case"SET_LOADED":return Object(j.a)(Object(j.a)({},e),{},{isLoaded:t.payload});default:return e}},h=c(15),p=c(27),f={items:{},totalPrice:0,itemsCount:0},g=function(e){return e.reduce((function(e,t){return e+t.price}),0)},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COFFEE_TO_CART":var c=e.items[t.payload.id]?[].concat(Object(p.a)(e.items[t.payload.id].items),[t.payload]):[t.payload],a=Object(j.a)(Object(j.a)({},e.items),{},Object(h.a)({},t.payload.id,{items:c,totalPrice:g(c)})),s=[].concat.apply([],Object.values(a).map((function(e){return e.items})));return Object(j.a)(Object(j.a)({},e),{},{items:a,totalPrice:g(s),itemsCount:s.length});case"CLEAR_CART":return f;case"REMOVE_CART_ITEM":var r=Object(j.a)({},e.items),i=r[t.payload].totalPrice,n=r[t.payload].items.length;return delete r[t.payload],Object(j.a)(Object(j.a)({},e),{},{items:r,totalPrice:e.totalPrice-i,itemsCount:e.itemsCount-n});case"PLUS_CART_ITEM":var o=[].concat(Object(p.a)(e.items[t.payload].items),[e.items[t.payload].items[0]]),l=Object(j.a)(Object(j.a)({},e.items),{},Object(h.a)({},t.payload,{items:o,totalPrice:g(o)})),d=[].concat.apply([],Object.values(l).map((function(e){return e.items})));return Object(j.a)(Object(j.a)({},e),{},{items:l,totalPrice:g(d),itemsCount:d.length});case"MINUS_CART_ITEM":var u=e.items[t.payload].items,m=u.length>1?u.slice(1):u,b=Object(j.a)(Object(j.a)({},e.items),{},Object(h.a)({},t.payload,{items:m,totalPrice:g(m)})),O=[].concat.apply([],Object.values(b).map((function(e){return e.items})));return Object(j.a)(Object(j.a)({},e),{},{items:b,totalPrice:g(O),itemsCount:O.length});default:return e}},v=Object(d.c)({filters:m,coffee:O,cart:x}),y=c(38),N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,C=Object(d.e)(v,N(Object(d.a)(y.a))),E=(c(50),c(4));function _(e){e.cartPrice,e.cartQuantity;var t=Object(l.c)((function(e){var t=e.cart;return{totalPrice:t.totalPrice,itemsCount:t.itemsCount}})),c=t.totalPrice,s=t.itemsCount;return Object(a.jsxs)("button",{className:"header-cart-button",children:[Object(a.jsxs)("p",{className:"header-cart-button-price",children:[c," ",Object(a.jsx)("i",{className:"fas fa-ruble-sign"})]}),Object(a.jsx)("img",{className:"header-cart-button-cart_icon",src:"images/shopping-cart.svg",alt:"cart icon"}),Object(a.jsx)("p",{children:s})]})}function T(){return Object(a.jsxs)("header",{children:[Object(a.jsx)(o.b,{to:"/",children:Object(a.jsxs)("div",{className:"header-logo",children:[Object(a.jsx)("img",{src:"images/coffe-guys-logo.png",alt:"",className:"header-logo-img"}),Object(a.jsxs)("div",{className:"header-logo-text",children:[Object(a.jsx)("h2",{children:"Coffee guys"}),Object(a.jsx)("p",{children:"the freshest coffee from enthusiasts"})]})]})}),Object(a.jsx)(o.b,{to:"/cart",children:Object(a.jsx)(_,{})})]})}var k=c(13),w=c.n(k),P=r.a.memo((function(e){var t=e.items,c=e.onClickCategory,s=e.activeCategory;return Object(a.jsxs)("div",{className:"filters-div",children:[Object(a.jsx)("button",{onClick:function(){return c(null)},className:w()("filters-button",{"filters-button-active":null===s}),children:"All"}),t&&t.map((function(e,t){return Object(a.jsx)("button",{onClick:function(){return c(t)},className:w()("filters-button",{"filters-button-active":s===t}),children:e},"".concat(e,"_").concat(t))}))]})}));P.defaultProps={items:[],activeCategory:null};var S=P,A=c(18),R=r.a.memo((function(e){var t=e.sortingOptions,c=e.onClickSortBy,s=e.activeSortBy,i=r.a.useState(!1),n=Object(A.a)(i,2),o=n[0],l=n[1],d=t.find((function(e){return e.name===s})).name,j=r.a.useRef(),u=function(e){(e.path||e.composedPath&&e.composedPath()).includes(j.current)||l(!1)};return r.a.useEffect((function(){document.body.addEventListener("click",u)}),[]),Object(a.jsxs)("div",{ref:j,className:"filters-sorting",children:[Object(a.jsx)("img",{className:"filters-sorting-triangle",src:"images/triangle.svg",alt:""}),Object(a.jsx)("p",{className:"filters-sorting-label",children:"Sorted by: "}),Object(a.jsx)("p",{className:"filters-sorting-method",onClick:function(){return l((function(e){return!e}))},children:d}),o&&Object(a.jsx)("div",{className:"filters-sorting-menu",children:t.map((function(e,t){return Object(a.jsx)("div",{onClick:function(){return t=e.name,c(t),void l(!1);var t},className:w()("filters-sorting-menu-item",{"filters-sorting-menu-item-active":s===e.name}),children:Object(a.jsx)("p",{children:e.name})},"".concat(e.name,"_").concat(t))}))})]})}));R.defaultProps={sortingOptions:[],activeSortBy:0};var I=R;function B(e){var t=e.id,c=e.imageUrl,s=e.name,i=e.price,n=e.grinds,o=e.sizes,l=e.onAddToCart,d=e.addedCount,j=["in grains","pre-ground"],u=[200,500,1e3],m=r.a.useState(0),b=Object(A.a)(m,2),O=b[0],h=b[1],p=r.a.useState(0),f=Object(A.a)(p,2),g=f[0],x=f[1];return Object(a.jsxs)("div",{className:"product-card",children:[Object(a.jsx)("img",{src:c,alt:"coffee",className:"product-card-img"}),Object(a.jsx)("h3",{className:"product-card-name",children:s}),Object(a.jsxs)("div",{className:"product-card-options",children:[Object(a.jsx)("ul",{className:"product-card-options-grind",children:j.map((function(e,t){return Object(a.jsx)("li",{value:"grind-li",onClick:function(){h(t)},className:w()({active:O===t,disabled:!n.includes(0)}),children:e},e)}))}),Object(a.jsx)("ul",{className:"product-card-options-size",children:u.map((function(e,t){return Object(a.jsxs)("li",{value:"size-li",onClick:function(){x(t)},className:w()({active:g===t,disabled:!o.includes(e)}),children:[e,"g"]},e)}))})]}),Object(a.jsxs)("div",{className:"product-card-bottom",children:[Object(a.jsxs)("h3",{className:"product-card-price",children:[i," rub"]}),Object(a.jsxs)("button",{onClick:function(){var e={id:t,name:s,imageUrl:c,price:i,grind:j[O],size:u[g]};l(e)},className:"product-card-button",children:[Object(a.jsx)("strong",{children:"+"})," Add ",d&&Object(a.jsx)("div",{className:"added_amount active",children:d})]})]})]})}B.defaultProps={name:"---",price:0,grinds:[],sizes:[]};var L=B,M=c(39);var D=function(){return Object(a.jsxs)(M.a,{speed:2,width:207,height:415,viewBox:"0 0 207 415",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(a.jsx)("rect",{x:"20",y:"20",rx:"0",ry:"0",width:"170",height:"170"}),Object(a.jsx)("rect",{x:"0",y:"223",rx:"4",ry:"4",width:"207",height:"22"}),Object(a.jsx)("rect",{x:"17",y:"264",rx:"10",ry:"10",width:"178",height:"90"}),Object(a.jsx)("rect",{x:"0",y:"375",rx:"4",ry:"4",width:"84",height:"25"}),Object(a.jsx)("rect",{x:"113",y:"363",rx:"20",ry:"20",width:"89",height:"45"})]})};var F=function(e){var t=e.id,c=e.name,s=e.imageUrl,r=e.grind,i=e.size,n=e.totalPrice,o=e.totalCount,l=e.onRemove,d=e.onPlus,j=e.onMinus;return Object(a.jsxs)("div",{className:"cart-item",children:[Object(a.jsxs)("div",{className:"cart-item-info",children:[Object(a.jsx)("img",{src:s,alt:""}),Object(a.jsxs)("div",{className:"cart-item-info-text",children:[Object(a.jsx)("h3",{children:c}),Object(a.jsxs)("p",{children:[r,", ",i,"g"]})]})]}),Object(a.jsxs)("div",{className:"cart-item-actions",children:[Object(a.jsx)("button",{className:"cart-item-actions-minus",name:"minus",onClick:function(){j(t)},children:Object(a.jsx)("i",{className:"fas fa-minus"})}),Object(a.jsx)("h3",{className:"cart-item-actions-quantity",children:o}),Object(a.jsx)("button",{className:"cart-item-actions-plus",name:"plus",onClick:function(){d(t)},children:Object(a.jsx)("i",{className:"fas fa-plus"})}),Object(a.jsxs)("h3",{className:"cart-item-actions-price",children:[n," rub."]}),Object(a.jsx)("button",{className:"cart-delete-button",onClick:function(){l(t)},children:Object(a.jsx)("img",{src:"images/cross.png",alt:"cross"})})]})]})},U=c.p+"static/media/shopping-cart-woman.7ef9bd12.png";var z=function(){return Object(a.jsxs)("div",{className:"empty-cart",children:[Object(a.jsx)("h1",{children:"The cart is empty \ud83d\ude15"}),Object(a.jsx)("p",{children:"Seems like you haven't added anything to your shopping cart."}),Object(a.jsx)("p",{children:"To order some freshly-roasted coffee from all over the world go to the main page."}),Object(a.jsx)("img",{src:U,alt:"shopping cart"}),Object(a.jsx)(o.b,{to:"/",children:Object(a.jsx)("button",{className:"empty-cart-go-back",children:"Go back"})})]})};var G=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){var t=e.cart;return{cartItems:t.items,totalPrice:t.totalPrice,itemsCount:t.itemsCount}})),c=t.cartItems,s=t.totalPrice,r=t.itemsCount,i=Object.keys(c).map((function(e){return c[e].items[0]})),n=function(t){window.confirm("Are you sure you want to delete ".concat(c[t].items[0].name," from the cart?"))&&e(function(e){return{type:"REMOVE_CART_ITEM",payload:e}}(t))},d=function(t){e(function(e){return{type:"PLUS_CART_ITEM",payload:e}}(t))},j=function(t){e(function(e){return{type:"MINUS_CART_ITEM",payload:e}}(t))};return Object(a.jsx)("div",{className:"content",children:r?Object(a.jsxs)("div",{className:"cart",children:[Object(a.jsxs)("div",{className:"cart-header",children:[Object(a.jsxs)("div",{className:"cart-header-logo",children:[Object(a.jsx)("img",{src:"images/shopping-cart.png",alt:""}),Object(a.jsx)("h1",{children:"Cart"})]}),Object(a.jsxs)("button",{onClick:function(){window.confirm("Are you sure you want to delete everything from the cart?")&&e({type:"CLEAR_CART"})},className:"cart-header-clear",children:[Object(a.jsx)("img",{src:"images/trash.svg",alt:"trash icon",className:""})," Empty cart"]})]}),Object(a.jsx)("div",{className:"cart-items",children:i&&i.map((function(e){return Object(a.jsx)(F,{id:e.id,name:e.name,imageUrl:e.imageUrl,grind:e.grind,size:e.size,totalPrice:c[e.id].totalPrice,totalCount:c[e.id].items.length,onRemove:n,onPlus:d,onMinus:j},e.id)}))}),Object(a.jsxs)("div",{className:"cart-total",children:[Object(a.jsxs)("h3",{children:["Packs: ",Object(a.jsxs)("span",{className:"cart-total-quantity",children:[r," pcs."]})]}),Object(a.jsxs)("h3",{children:["Total: ",Object(a.jsxs)("span",{className:"cart-total-sum",children:[s," rub."]})]})]}),Object(a.jsxs)("div",{className:"cart-bottom-buttons",children:[Object(a.jsx)(o.b,{to:"/",children:Object(a.jsxs)("button",{className:"cart-bottom-buttons-go-back",children:[Object(a.jsx)("img",{src:"images/go-back-arrow.svg",alt:"arrow",className:"go-back-arrow"})," Go back"]})}),Object(a.jsx)("button",{className:"cart-bottom-buttons-buy-now",children:"Buy now"})]})]}):Object(a.jsx)(z,{})})},Y=c(40),q=c.n(Y),V=function(e){return{type:"SET_COFFEE",payload:e}},J=["Filter","Espresso","Capsules","Drip bags"],X=[{name:"popularity"},{name:"price"},{name:"q-grade"}];var Q=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return{coffeeItems:e.coffee.items,isLoaded:e.coffee.isLoaded,currentFilterCategory:e.filters.category,currentSortBy:e.filters.sortBy,cartItems:e.cart.items}})),c=t.coffeeItems,s=t.isLoaded,i=t.currentFilterCategory,n=t.currentSortBy,o=t.cartItems;r.a.useEffect((function(){var t,c;e((t=i,c=n,function(e){e({type:"SET_LOADED",payload:!1}),q.a.get("/coffee?".concat(null!==t?"category=".concat(t):"","&_sort=").concat(c,"&_order=desc")).then((function(t){var c=t.data;e(V(c))}))}))}),[i,n]);var d=r.a.useCallback((function(t){e({type:"SET_CATEGORY",payload:t})}),[]),u=r.a.useCallback((function(t){e(function(e){return{type:"SET_SORT_BY",payload:e}}(t))}),[]),m=r.a.useCallback((function(t){e({type:"ADD_COFFEE_TO_CART",payload:t})}),[]);return Object(a.jsxs)("div",{className:"content",children:[Object(a.jsxs)("nav",{className:"filters",children:[Object(a.jsx)(S,{activeCategory:i,onClickCategory:d,items:J}),Object(a.jsx)(I,{activeSortBy:n,onClickSortBy:u,sortingOptions:X})]}),Object(a.jsx)("div",{className:"cards-wrapper",children:s?c.map((function(e,t){return Object(a.jsx)(L,Object(j.a)({onAddToCart:m,addedCount:o[e.id]&&o[e.id].items.length},e),e.id)})):Array(12).fill(0).map((function(e,t){return Object(a.jsx)(D,{},t)}))})]})},H=c.p+"static/media/decorative1.318243a4.jpg",K=c.p+"static/media/decorative2.10acdde8.jpg",W=c.p+"static/media/decorative3.2c673479.jpg",Z=c.p+"static/media/decorative4.b602b62d.jpg";var $=function(){return Object(a.jsxs)("div",{className:"background",children:[Object(a.jsxs)("div",{className:"container-wrapper",children:[Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(T,{}),Object(a.jsx)(E.a,{exact:!0,path:"/",component:Q}),Object(a.jsx)(E.a,{exact:!0,path:"/cart",component:G})]}),Object(a.jsx)("img",{src:K,className:"container-wrapper-decorative-img container-wrapper-decorative-img-2"}),Object(a.jsx)("img",{src:W,className:"container-wrapper-decorative-img container-wrapper-decorative-img-3"})]}),Object(a.jsx)("img",{src:H,className:"background-decorative-img background-decorative-img-1"}),Object(a.jsx)("img",{src:Z,className:"background-decorative-img background-decorative-img-4"})]})};n.a.render(Object(a.jsx)(o.a,{children:Object(a.jsx)(l.a,{store:C,children:Object(a.jsx)($,{})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.7522a532.chunk.js.map